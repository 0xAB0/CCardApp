{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport axios from \"axios\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nconst ImportBtn = () => {\n  const router = useRouter();\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const file = e.target.file.files[0];\n    const name = file.name.slice(0, -4);\n    var reader = new FileReader();\n    reader.readAsText(file);\n\n    reader.onload = async function (evt) {\n      const res = await axios.post(`${process.env.NEXT_PUBLIC_API_URL}/import/?name=${name}`, evt.target.result, {\n        headers: {\n          \"Content-Type\": \"text/csv\"\n        }\n      });\n\n      if (res.data.status === \"ok\") {\n        setOpen(false);\n        router.push({\n          pathname: \"/import\",\n          query: {\n            id: res.data.id,\n            name\n          }\n        });\n      }\n    };\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: handleClickOpen\n  }, \"Import\"), __jsx(Dialog, {\n    open: open,\n    onClose: handleClose\n  }, __jsx(DialogTitle, null, \"Import CSV\"), __jsx(\"form\", {\n    onSubmit: handleSubmit\n  }, __jsx(DialogContent, null, __jsx(\"input\", {\n    required: true,\n    name: \"file\",\n    type: \"file\",\n    accept: \".csv\"\n  })), __jsx(DialogActions, null, __jsx(Button, {\n    onClick: handleClose,\n    color: \"default\"\n  }, \"Cancel\"), __jsx(Button, {\n    type: \"submit\",\n    color: \"primary\"\n  }, \"Upload\")))));\n};\n\nexport default ImportBtn;","map":null,"metadata":{},"sourceType":"module"}